{"version":3,"sources":["services/dataService.js","components/personForm.js","components/person.js","components/persons.js","components/filter.js","components/Notification.js","App.js","index.js"],"names":["baseUrl","axios","get","newObject","post","id","put","delete","PersonForm","props","onChange","handleNewName","value","newName","handleNumber","number","onClick","handleSubmit","type","Person","personArray","map","person","i","key","name","window","confirm","dataService","catch","e","console","log","setErrorMessage","setStatus","setTimeout","then","returnedData","setPersons","persons","filter","Persons","filterValue","searchResults","Filter","handleFilterName","Notification","message","status","className","App","useState","setNewName","setNumber","setFilterValue","setSearchResults","errorMessage","useEffect","response","data","search","filtered","o","toLowerCase","includes","target","preventDefault","length","some","find","p","concat","error","Index","ReactDom","render","document","getElementById"],"mappings":"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","file":"static/js/main.962cab72.chunk.js","sourcesContent":["import axios from 'axios';\n//to run locally\n//const baseUrl = 'http://localhost:3001/persons' \nconst baseUrl = '/api/persons'\nconst getAll = () => {\n  return axios.get(baseUrl)\n}\n\nconst create = newObject => {\n  return axios.post(baseUrl, newObject)\n}\n\nconst update = (id, newObject) => {\n  return axios.put(`${baseUrl}/${id}`, newObject)\n}\n\nconst deletePerson =(id) => {\n  return axios.delete(`${baseUrl}/${id}`)\n}\n\nexport default { getAll, create, update, deletePerson}\n","import React from \"react\";\n\nconst PersonForm = (props) => {\n  return (\n    <div>\n      <form>\n        <div>\n          name: <input onChange={props.handleNewName} value={props.newName} />\n        </div>\n\n        <div>\n          number: <input onChange={props.handleNumber} value={props.number} />\n        </div>\n        <div>\n          <button onClick={props.handleSubmit} type=\"submit\">\n            add\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default PersonForm;\n","import React from \"react\";\nimport dataService from \"../services/dataService\";\n\nconst Person = (props) => {\n  const handleDelete = (name, id) => {\n    if (window.confirm(`Delete ${name} ?`)) {\n      dataService\n        .deletePerson(id)\n        .catch((e) => {\n          console.log(e);\n          props.setErrorMessage(\n            `Information of ${name} has already been removed from server`,\n            \"error\"\n          );\n          props.setStatus('error');\n          setTimeout(() => {\n            props.setErrorMessage(null);\n          }, 5000);\n        })\n        .then((returnedData) => {\n          props.setPersons(props.persons.filter((i) => i.name !== name));\n        });\n    }\n  };\n  return (\n    <div>\n    {props.personArray.map((person, i) => (\n        <p key={i}>\n          {person.name} {person.number}{\" \"}\n          <button onClick={() => handleDelete(person.name, person.id)}>\n            Delete\n          </button>\n        </p>\n      ))}\n    </div>\n  );\n};\n\nexport default Person;\n","import React from \"react\";\nimport Person from './person';\n\nconst Persons = (props) => {\n  return (\n    <div>\n      {props.filterValue ? (\n        <Person personArray={props.searchResults} setErrorMessage={props.setErrorMessage}\n        setPersons={props.setPersons}\n        persons={props.persons}\n        setStatus={props.setStatus}\n        />\n      ) : (\n        <Person personArray={props.persons} setErrorMessage={props.setErrorMessage}\n        setPersons={props.setPersons}\n        persons={props.persons}\n        setStatus={props.setStatus}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default Persons;\n","import React from 'react';\n\nconst Filter = (props) => {\n  return(\n    <div>\n    filter shown with \n    <input onChange={props.handleFilterName} value={props.filterValue} />\n  </div>\n  )\n};\n\nexport default Filter;","import React from 'react';\n\nconst Notification = ({message, status}) => {\n  \n  if(status === 'error'){\n    return(\n      <div className='error'>\n      {message}\n      </div>\n    );\n  }\nreturn(\n  <div className='message'>\n  {message}\n  </div>\n);\n}\n\nexport default Notification;","import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\n\nimport dataService from \"./services/dataService\";\nimport PersonForm from \"./components/personForm\";\nimport Persons from \"./components/persons\";\nimport Filter from \"./components/filter\";\nimport Notification from \"./components/Notification\";\n\nimport \"./App.css\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [number, setNumber] = useState(\"\");\n  const [filterValue, setFilterValue] = useState(\"\");\n  const [searchResults, setSearchResults] = useState(\"\");\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const [status, setStatus] = useState(\"\");\n  useEffect(() => {\n    dataService.getAll().then((response) => {\n      console.log(\"response \", response.data);\n      setPersons(response.data);\n    });\n  }, [newName, number]);\n\n  useEffect(() => {\n    console.log(\"error message updated\");\n  }, [errorMessage]);\n  const handleNewName = (e) => {\n    setNewName(e.target.value);\n  };\n\n  const handleNumber = (e) => {\n    setNumber(e.target.value);\n  };\n  const handleFilterName = (e) => {\n    const value = e.target.value;\n    setFilterValue(value.toLowerCase());\n    search(filterValue);\n  };\n  const search = (value) => {\n    let filtered = persons.filter((o) => o.name.toLowerCase().includes(value));\n    setSearchResults(filtered);\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    if (newName.length > 0 && number.length > 0) {\n      if (\n        persons.some(\n          (person) => person.name.toLowerCase() === newName.toLowerCase()\n        )\n      ) {\n        if (\n          window.confirm(\n            `${newName} is already added to phonebook, replace the old number with a new one`\n          )\n        ) {\n          const data = persons.find(\n            (p) => p.name.toLowerCase() === newName.toLowerCase()\n          );\n\n          dataService\n            .update(data.id, { name: newName, number: number })\n            .then(() => {\n              setErrorMessage(`Edited ${newName}`, \"success\");\n              setStatus(\"success\");\n              setTimeout(() => {\n                setErrorMessage(null);\n              }, 5000);\n            });\n        }\n        setNewName(\"\");\n        setNumber(\"\");\n      } else {\n        //setPersons(persons.concat({ name: newName, number: number }));\n        dataService\n          .create({ name: newName, number: number })\n          .then((returnedData) => {\n            setPersons(persons.concat(returnedData));\n            setErrorMessage(`Added ${newName}`, \"success\");\n            setStatus(\"success\");\n            setTimeout(() => {\n              setErrorMessage(null);\n            }, 5000);\n            setNewName(\"\");\n            setNumber(\"\");\n          })\n          .catch((error) => {\n            console.log(error.response.data).then(() => {\n              setErrorMessage(error.response.data);\n              setStatus(\"error\");\n              setTimeout(() => {\n                setErrorMessage(null);\n              }, 5000);\n            });\n          });\n      }\n    }\n  };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      {errorMessage && <Notification message={errorMessage} status={status} />}\n      <Filter handleFilterName={handleFilterName} filterValue={filterValue} />\n      <h3>Add a new </h3>\n      <PersonForm\n        handleNewName={handleNewName}\n        newName={newName}\n        handleNumber={handleNumber}\n        number={number}\n        handleSubmit={handleSubmit}\n        setStatus={setStatus}\n      />\n\n      <h3>Numbers</h3>\n      <Persons\n        filterValue={filterValue}\n        searchResults={searchResults}\n        setErrorMessage={setErrorMessage}\n        setPersons={setPersons}\n        persons={persons}\n      />\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDom from 'react-dom';\nimport App from './App';\nconst Index = () => {\n  return (\n    <div>\n      <App />\n    </div>\n  );\n};\n\nReactDom.render(<Index />, document.getElementById(\"root\"));\n"],"sourceRoot":""}